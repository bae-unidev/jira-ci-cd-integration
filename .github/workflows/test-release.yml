name: 'test-release'

on:
  push:
    tags:
      - v[0-9]+.[0-9]+.[0-9]+
      - v[0-9]+

jobs:
  test-build:
    runs-on: ubuntu-latest
    steps:
      - name: Jira Development Integration
        uses: rohit-gohri/jira-ci-cd-integration@v0
        env:
          JIRA_DEFAULT_TEST_ISSUE: 'JCI-7'
        with:
          event_type: build
          state: ${{ job.status }}
          jira_instance: boringdownload
          token: ${{ secrets.GITHUB_TOKEN }}
          client_id: ${{ secrets.JIRA_CLIENT_ID }}
          client_secret: ${{ secrets.JIRA_CLIENT_SECRET }}

  # TODO: Fix this
  # test-deployment:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Jira Development Integration
  #       uses: rohit-gohri/jira-ci-cd-integration@v0
  #       env:
  #         JIRA_DEFAULT_TEST_ISSUE: 'JCI-7'
  #       with:
  #         event_type: deployment
  #         state: ${{ job.status }}
  #         jira_instance: boringdownload
  #         token: ${{ secrets.GITHUB_TOKEN }}
  #         client_id: ${{ secrets.JIRA_CLIENT_ID }}
  #         client_secret: ${{ secrets.JIRA_CLIENT_SECRET }}
